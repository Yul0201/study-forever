# WAS
|구분|Web Server|WAS|
|:--:|:--|:--|
|정의|정적인 컨텐츠(HTML, CSS, IMAGE 등)을 제공하는 서버|동적인 컨텐츠(웹 어플리케이션)을 처리하고 제공하는 서버|
|기능|HTTP 프로토콜을 이용해 클라이언트에게 웹페이지 제공|웹 애플리케이션 실행 및 데이터 처리, 웹 서버화 클라이언트 간의 중계|
|주요 소프트웨어|Apache,Nginx,IIS|Tomcat, JBoss, WebLogic, WebSphere

> IIS (Internet Information Service) MS에서(윈도우) 사용가능한 웹 서버 소프트웨어


- 웹서버의 역할
    - 클라이언트가 웹 브라우저를 통해 요청한 정적 컨텐츠를 제공하는 역할을 함
    (.html, .jpeg, .css)
    - 웹서버는 주로 HTTP를 사용하여 클라이언트가 URL 을 통해 요청한 웹 페이지를 전송
    - 웹서버가 정적 페이지를 다룰 때 동작 방식
         1. URL 수신 : 웹서버는 사용자 또는 클라이언트로부터 확장명까지 적혀있는 주소를 받음
         2. 파일 확인 : 웹서버는 자신이 저장하고 있는 데이터에서 해당 파일이 존재하는지 확인함
         3. 파일 전송 : 파일이 존재하면 웹서버는 해당 파일을 찾아 사용자에게 전송함. 이 과정에서 추가적인 처리없이 파일 그대로 전송함

    - 홈페이지, 블로그, 뉴스 사이트 등
- WAS 서버의 역할
    - 웹 어플리케이션을 실행하여 동적 컨텐츠를 생성하고 웹 서버-클라이언트 간의 데이터 처리함. WAS 서버는 클라이언트의 요청에 따라 DB에서 정보를 가져오거나 웹 어플리케이션을 실행하여 동적인 웹 페이지를 생성한 후 결과를 웹 서버에 전달하고 웹서버는 이를 클라이언트에게 전달함
    - WAS 동작 방식
        1. URL 수신
        2. 웹 컨테이너로 요청 전달 : 요청을 웹 컨테이너에게 넘김
        3. 처리 및 프로그래밍 : 웹 컨테이너는 해당 주소와 연결된 컨트롤러(서블릿)을 찾아 필요한 프로그래밍 작업(DB 접근, 알고리즘 연산) 진행
        4. 결과 반영 및 전송 : 프로그래밍 결과를 템플릿 엔진(웹 페이지 구조를 정의하는 프로그램)에 반영하여 새로운 웹 페이지를 생성하고 이를 사용자에게 전송함
         ![](2024-08-11-13-42-58.png)
         > 웹 컨테이너 : 동적인 컨텐츠를 생성 및 관리하는 프로그램. JAVA의 경우 웹 컨테이너 안에는 서블릿(Servelet)이 포함되며이는 HTTP 요청을 처리하고 응답을 생성하는 JAVA 프로그램 임
         > 템플릿 엔진 : 웹 페이지의 구조를 정의하는 프레임 워크 또는 라이브러리이며 동적으로 생성된 데이터를 웹 페이지의 특정 부분에 삽입하여 최종적으로 사용자에게 전달될 HTML 문서를 생성함(e.g. JSP, Thymeleaf, Musthche)

    - Web container와 Servlet container의 차이
        - Web container : runtime에 web application을 관리하는 역할을 함. API를 제공하고 HTTP request를 처리하며 web componenets(servelet, JSP, Listener)의 생명주기를 관리함
        - Servlet container : java servlet의 한 종류이며 HTTP의 요청과 응답을 처리하는 Tomcat 과 같은 소프트웨어를 칭함

    - 온라인 쇼핑몰, 인터넷 뱅킹, SNS 등
- 활용 사례
    - 웹 서버와 WAS 서버는 같이 사용되고 있음
    - 온라인 쇼핑몰 : 사용자가 상품검색, 장바구니에 담는 동적인 작업을 WAS에서 처리하고 상품 이미지나, 정보는 웹서버에서 제공
    - 커뮤니티 : 게시판 글 작성, 댓글 달기 등 동적인 기능은 WAS에서 처리하고 게시글 내용이나 이미지 등은 웹 서버에서 제공    
- **WAS는 정적, 동적 처리는 가능하나 전체 프로세스를 맡기는 것은 위험함**
    - 정적, 동적 컨텐츠 처리에 따른 트래픽 쏠림 현상
    - WAS 는 동적 컨텐츠를 처리하기 위해 DB 와 같은 중요 리소스에 접근하며 이로 인해 WAS의 업무는 분산하는게 필요
    - Solution
        - 웹 서버를 WAS로 분리하고 웹 컨테이너만을 가진 WAS 인스턴스를 확장하여 동적 컨텐츠 요청에 대응하고 부하 분산하는 방법이 있음
        - ![](2024-08-11-13-34-30.png)
        - 이 경우 웹서버는 다음의 기능을 수행함
            - Caching : 데이터 재사용으로 응답 단축 및 리소스 최적화
            - LB : 트래픽이 몰릴 때 웹 서버는 요청을 서버에 분산 처리함
            - Health Check : 백엔드 서버 상태 점검 및 트래픽 제외 처리함
            - Reverse Proxy : 웹서버는 클라이언트의 요청을 대신 처리하고 결과를 반환하며 이 과정에서 백엔드 서버의 정보를 숨김


---
> 인용 
- https://velog.io/@eugenieseo16/CS22 
- https://story.pxd.co.kr/1647 
- https://m42-orion.tistory.com/157?category=1051928